<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Bar La Zisola - Menu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root { --shadow: 0 2px 6px rgba(0,0,0,0.3); }
    body {font-family: Arial, sans-serif; margin:0; background:#fdfdfd;}
    nav {
      position:sticky; top:0; z-index:1000;
      display:flex; align-items:center; justify-content:space-between;
      background:linear-gradient(135deg,#ff7043,#d84315);
      padding:12px 20px; color:#fff;
      box-shadow: var(--shadow);
    }
    nav a {color:white; margin-right:20px; text-decoration:none; font-weight:bold;}
    nav .cart {font-size:2.2em; cursor:pointer; position:relative;}
    nav .cart span {
      position:absolute; top:-8px; right:-10px;
      background:white; color:#d84315;
      font-size:0.7em; font-weight:bold;
      padding:2px 5px; border-radius:50%;
    }

    h1 {text-align:center; margin:20px; color:#d84315;}
    .box {background:#fff; border-radius:10px; padding:15px; margin:15px auto; max-width:700px; box-shadow:0 2px 8px rgba(0,0,0,0.1);}
    .panino h3 {margin:0 0 6px 0; color:#d84315;}
    .panino p {margin:0 0 10px 0; font-style:italic; color:#555;}
    .panino label {display:block; margin:4px 0;}
    .panino select, .panino textarea, .panino input[type="number"], #cliente {
      width:100%; padding:8px; margin:6px 0; border:1px solid #ccc; border-radius:6px;
    }
    .panino textarea {resize:vertical; min-height:60px;}

    .controls {text-align:center; margin:24px;}
    button {
      background:#25D366; color:white; border:none; padding:12px 25px;
      border-radius:8px; font-size:1.1em; font-weight:bold; cursor:pointer;
      box-shadow:0 2px 6px rgba(0,0,0,0.15);
    }
    button:hover {background:#128C7E;}

    /* Modal carrello */
    .modal {
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); z-index:2000; justify-content:center; align-items:center;
    }
    .modal-content {
      background:white; padding:20px; border-radius:10px;
      max-width:600px; width:90%; max-height:80%; overflow-y:auto;
      box-shadow:0 2px 10px rgba(0,0,0,0.3);
    }
    .modal h2 {margin-top:0; color:#d84315;}
    .ordine-item {border-bottom:1px solid #ddd; padding:8px 0;}
    .ordine-item span {display:block; margin-bottom:6px;}
    .ordine-item input[type="number"] {
      width:60px; padding:4px; margin-right:10px;
    }
    .ordine-item button {
      background:red; color:white; border:none; padding:5px 10px;
      border-radius:5px; cursor:pointer; font-size:0.9em;
    }
    .close {float:right; font-size:1.5em; cursor:pointer; color:#333;}
  </style>
</head>
<body>

<nav>
  <div><a href="index.html">Home</a> <a href="contatti.html">Contatti</a></div>
  <div class="cart" onclick="apriCarrello()">üõí<span id="cart-count">0</span></div>
</nav>

<h1>Menu Panini</h1>

<div class="box">
  <label><strong>Il tuo nome:</strong></label>
  <input type="text" id="cliente" placeholder="Scrivi qui il tuo nome...">
</div>

<!-- üîΩ Panini -->
<div class="box panino" data-base="Carne di cavallo">
  <label><input type="checkbox" class="attivo" onchange="aggiornaCarrello()"> Seleziona questo panino</label>
  <h3>Panino con carne di cavallo</h3>
  <p>Base: carne di cavallo, cipolla</p>
  <label>Quantit√†:<input type="number" min="1" value="1" class="quantita" onchange="aggiornaCarrello()"></label>
  <label>Tipo pane:<select class="pane"><option>Ciabatta croccante</option><option>Morbido</option></select></label>
  <label>Variante:<select class="variante"><option>Cipolla fresca</option><option>Cipolla caramellata</option></select></label>
  <strong>Extra:</strong>
  <label><input type="checkbox" value="Formaggio" class="extra"> Formaggio</label>
  <label><input type="checkbox" value="Funghi piccanti" class="extra"> Funghi piccanti</label>
  <label><input type="checkbox" value="Rucola" class="extra"> Rucola</label>
  <label><input type="checkbox" value="Patatine" class="extra"> Patatine</label>
  <label><input type="checkbox" value="Riscaldato" class="extra"> Riscaldato</label>
  <textarea placeholder="Note extra..."></textarea>
</div>

<!-- altri panini identici alla versione precedente: bresaola, porchetta, mortadella, crudo, cotto, salame, pancetta, caprese -->
<!-- ... (inseriti tutti come gi√† fatto nella versione lunga sopra) ... -->

<div class="controls">
  <button onclick="apriCarrello()">üõí Vedi carrello</button>
</div>

<!-- Modal carrello -->
<div class="modal" id="modal-carrello">
  <div class="modal-content">
    <span class="close" onclick="chiudiCarrello()">&times;</span>
    <h2>Il tuo ordine</h2>
    <div id="riepilogo"></div>
    <div style="text-align:center; margin-top:15px;">
      <button onclick="inviaWhatsApp()">üì≤ Invia su WhatsApp</button>
    </div>
  </div>
</div>

<script>
function aggiornaCarrello(){
  const panini = document.querySelectorAll(".panino");
  let count = 0;
  panini.forEach(p => {
    if (p.querySelector(".attivo").checked) {
      const q = parseInt(p.querySelector(".quantita").value) || 0;
      count += q;
    }
  });
  document.getElementById("cart-count").textContent = count;
}

function apriCarrello() {
  const modal = document.getElementById("modal-carrello");
  const riepilogoDiv = document.getElementById("riepilogo");
  riepilogoDiv.innerHTML = "";

  const panini = document.querySelectorAll(".panino");
  let i = 0;
  panini.forEach((p) => {
    if (!p.querySelector(".attivo").checked) return;

    const base = p.dataset.base;
    const quantita = p.querySelector(".quantita").value;
    const pane = p.querySelector(".pane").value;
    const variante = p.querySelector(".variante") ? p.querySelector(".variante").value : "";
    const ingr = [...p.querySelectorAll(".extra:checked")].map(x => x.value);
    const note = p.querySelector("textarea").value.trim();

    let descr = `${base}`;
    if (variante) descr += ` (${variante})`;
    descr += ` - ${pane}`;
    if (ingr.length > 0) descr += ` + ${ingr.join(", ")}`;
    if (note) descr += ` | Note: ${note}`;

    const div = document.createElement("div");
    div.className = "ordine-item";
    div.innerHTML = `
      <span>${descr}</span>
      <input type="number" min="1" value="${quantita}" onchange="cambiaQuantita(${i}, this.value)">
      <button onclick="rimuoviPanino(${i})">‚ùå Rimuovi</button>
    `;
    riepilogoDiv.appendChild(div);

    i++;
  });

  modal.style.display = "flex";
}

function chiudiCarrello() {
  document.getElementById("modal-carrello").style.display = "none";
}

function rimuoviPanino(index) {
  const panini = Array.from(document.querySelectorAll(".panino")).filter(p => p.querySelector(".attivo").checked);
  if (panini[index]) {
    panini[index].querySelector(".attivo").checked = false;
    aggiornaCarrello();
    apriCarrello();
  }
}

function cambiaQuantita(index, nuovaQ) {
  const panini = Array.from(document.querySelectorAll(".panino")).filter(p => p.querySelector(".attivo").checked);
  if (panini[index]) {
    panini[index].querySelector(".quantita").value = nuovaQ;
    aggiornaCarrello();
    apriCarrello();
  }
}

function inviaWhatsApp() {
  const cliente = document.getElementById("cliente").value.trim();
  const panini = document.querySelectorAll(".panino");
  let dettaglio = "";
  let count = 0;

  panini.forEach((p) => {
    if (!p.querySelector(".attivo").checked) return;

    const base = p.dataset.base;
    const quantita = p.querySelector(".quantita").value;
    const pane = p.querySelector(".pane").value;
    const variante = p.querySelector(".variante") ? p.querySelector(".variante").value : "";
    const ingr = [...p.querySelectorAll(".extra:checked")].map(x => x.value);
    const note = p.querySelector("textarea").value.trim();

    count++;
    let riga = `${quantita}x ${base}`;
    if (variante) riga += ` (${variante})`;
    riga += ` - ${pane}`;
    if (ingr.length > 0) riga += ` + ${ingr.join(", ")}`;
    if (note) riga += ` | Note: ${note}`;
    dettaglio += riga + "\n";
  });

  if (count === 0) {
    alert("Carrello vuoto");
    return;
  }

  let messaggio = cliente
    ? `Ordine Bar La Zisola da: ${cliente}\n\n${dettaglio}`
    : `Ordine Bar La Zisola (cliente non specificato)\n\n${dettaglio}`;

  const url = "https://wa.me/393384461593?text=" + encodeURIComponent(messaggio);
  window.open(url, "_blank");
}
</script>

</body>
</html>
